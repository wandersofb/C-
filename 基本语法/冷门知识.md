# 冷门知识

记录一下自己在学习和面试时让我头脑模糊的知识。

### 结构体对齐

有点无聊的知识，不过笔试常考。要想算一个结构体有多少字节数，有几个要点：
1. 数据成员对齐规则：结构(struct)(或联合(union))的数据成员，第一个数据成员放在offset为0的地方，每个数据成员存储的起始位置要从该成员(每个成员本身)大小的整数倍开始(比如int在32位机为４字节,则要从４的整数倍地址开始存储)。
2. 结构体作为成员:如果一个结构里有某些结构体成员,则结构体成员要从其内部最大元素大小的整数倍地址开始存储.(struct a里存有struct b,b里有char,int ,double等元素,那b应该从8的整数倍开始存储.)
3. 收尾工作:结构体的总大小,也就是sizeof的结果,.必须是其内部最大成员的整数倍（结构体成员以最大成员为代表）.不足的要补齐.

### 各个数据类型的字节数

32,64位编译环境下的 sizeof 问题经常出现。不过，两者环境下的数据类型所占字节数都是一样的，
```cpp
char:1字节；
 
short:2字节；
 
int:4字节；
 
long long:8字节；
 
float:4字节；
 
double:8字节；
 
long double:8字节；
```

不同的是：指针类型和 long
- 32位：指针类型占4个字节，long 占 4个字节。
- 64位：指针类型占8个字节，long 占 8个字节。

### 静态变量只会初始化一次

```cpp
void foo() {
    static char *p = new char[128];
}
```

在多次调用 foo 函数时，p 只会被初始化一次，不是全局变量那样可以随意初始化。可以反向理解为 static 语句只会被执行一次，执行完之后随机删除。


### C++ 命名规则

合法标识符规则如下：
1. 由数字，字母，下划线组成；
2. 不能由数字开头。即第一个字符只能是字母或下划线。
3. 区分大小写。
4. 不可与系统关键字相同。

### const 限定符

- *之前，则const限定的是*ptr而不限定ptr。也就是说，ptr可以改变其所指向的对象，但不能通过该指针修改其所指向对象的值。
- 若const限定符在*之后，则const限定的是ptr而不限定*ptr。也就是说，ptr不可以改变其所指向的对象，但能通过该指针修改其所指向对象的值。

- 若在*之前有const限定符且在*之后也有const限定符，则ptr与*ptr都被限定。也就是说，ptr既不可以改变其所指向的对象，也不能通过该指针修改其所指向对象的值。
- 另外：只要 在*之后有 const限定符，则该指针在声明时必须初始化。